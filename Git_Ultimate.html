<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git 企业级实战手册 (终极详解版)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0d1117;
            --bg-panel: #161b22;
            --border: #30363d;
            --text-main: #c9d1d9;
            --accent: #58a6ff;
            --success: #238636;
            --warning: #d29922;
            --danger: #da3633;
            --code-bg: #0d1117;
        }

        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: var(--bg-dark); color: var(--text-main); display: flex; height: 100vh; overflow: hidden; }

        /* 左侧导航 */
        .sidebar { width: 260px; background: var(--bg-panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; }
        .brand { padding: 20px; font-weight: bold; font-size: 18px; border-bottom: 1px solid var(--border); color: white; display: flex; align-items: center; gap: 10px; }
        .nav-item { padding: 12px 20px; cursor: pointer; border-left: 3px solid transparent; color: #8b949e; transition: 0.2s; font-size: 14px; }
        .nav-item:hover { background: #21262d; color: white; }
        .nav-item.active { border-left-color: var(--accent); background: #21262d; color: white; font-weight: bold; }
        .nav-header { font-size: 12px; color: #6e7681; padding: 15px 20px 5px; text-transform: uppercase; font-weight: bold; }

        /* 主内容区 */
        .main { flex: 1; padding: 40px; overflow-y: auto; scroll-behavior: smooth; }
        .scene { display: none; max-width: 900px; margin: 0 auto; animation: fadeUp 0.4s ease; }
        .scene.active { display: block; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h1 { border-bottom: 1px solid var(--border); padding-bottom: 15px; margin-top: 0; color: white; }
        h2 { color: var(--accent); margin-top: 30px; font-size: 18px; }
        
        /* 案例卡片 */
        .case-study { background: #1c2128; border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin: 20px 0; border-left: 4px solid var(--warning); }
        .case-title { font-weight: bold; color: var(--warning); margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }

        /* 终端模拟 */
        .terminal { background: #010409; border: 1px solid var(--border); border-radius: 6px; padding: 15px; font-family: 'Consolas', monospace; margin: 15px 0; color: #e6edf3; font-size: 13px; line-height: 1.6; }
        .cmd { color: #79c0ff; }
        .comment { color: #8b949e; font-style: italic; display: block; margin-top: 5px; }
        .output { color: #8b949e; margin-bottom: 8px; display: block; }

        /* Ignore 文件样式 */
        .file-editor { background: #1e1e1e; border: 1px solid #444; border-radius: 6px; overflow: hidden; margin-top: 20px; }
        .editor-header { background: #252526; padding: 5px 15px; font-size: 12px; color: #ccc; border-bottom: 1px solid #444; display: flex; justify-content: space-between; }
        .editor-content { padding: 15px; color: #d4d4d4; font-family: 'Consolas', monospace; font-size: 14px; line-height: 1.5; white-space: pre; }
        .line-comment { color: #6a9955; }
        .line-file { color: #ce9178; }

        /* Merge vs Rebase 可视化 */
        .comparison-box { display: flex; gap: 20px; margin-top: 20px; }
        .viz-col { flex: 1; background: var(--bg-panel); border: 1px solid var(--border); border-radius: 8px; padding: 15px; text-align: center; }
        .viz-title { font-weight: bold; margin-bottom: 15px; color: white; }
        
        /* 简单的 CSS 树形图模拟 */
        .tree-node { display: inline-block; width: 12px; height: 12px; border-radius: 50%; background: #8b949e; margin: 5px; position: relative; z-index: 2; }
        .tree-line { width: 2px; background: #30363d; position: absolute; z-index: 1; }
        .branch-main .tree-node { background: var(--accent); }
        .branch-feat .tree-node { background: var(--success); }

        /* 动态演示按钮 */
        .demo-controls { margin-top: 20px; display: flex; gap: 10px; justify-content: center; }
        .btn { padding: 8px 16px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; color: white; transition: 0.2s; }
        .btn-blue { background: #1f6feb; }
        .btn-blue:hover { background: #388bfd; }

                /* 时间轴样式 (全流程专用) */
        .timeline { position: relative; padding-left: 30px; border-left: 2px solid var(--border); margin-left: 10px; }
        .timeline-item { margin-bottom: 40px; position: relative; }
        .timeline-dot { width: 16px; height: 16px; background: var(--bg-dark); border: 2px solid var(--accent); border-radius: 50%; position: absolute; left: -39px; top: 0; }
        .timeline-time { font-size: 12px; color: #8b949e; margin-bottom: 5px; font-weight: bold; }
        .timeline-content { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 8px; padding: 20px; }
        .timeline-content h3 { margin-top: 0; font-size: 16px; color: white; display: flex; align-items: center; gap: 10px; }
        
        .badge { font-size: 10px; padding: 2px 6px; border-radius: 4px; background: #30363d; color: #c9d1d9; border: 1px solid #6e7681; }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="brand"><i class="fab fa-git-alt"></i> Git Guide Pro</div>
    
    <a href="index.html" class="nav-item" style="text-decoration: none; display: block;">
        <i class="fas fa-home"></i> 返回基础版
    </a>

    <div class="nav-header">入门篇</div>
    <div class="nav-item active" onclick="show('clone')">1. 安全拉取项目</div>
    <div class="nav-item" onclick="show('workflow')">2. 标准开发流程</div>

    <div class="nav-header">进阶篇 (核心)</div>
    <div class="nav-item" onclick="show('compare')">3. Merge vs Rebase</div>
    <div class="nav-item" onclick="show('conflict')">4. 手把手解冲突</div>
    
    <div class="nav-header">救命篇</div>
    <div class="nav-item" onclick="show('undo')">5. 写错了怎么办</div>
    <div class="nav-item" onclick="show('ignore')">6. 忽略配置 (Ignore)</div>
    <div class="nav-item" style="color: var(--accent); font-weight: bold;" onclick="show('simulation')">7. 综合演练 (Full Demo)</div>
</div>

<div class="main">

    <div id="clone" class="scene active">
        <h1>1. 安全拉取项目 (Clone)</h1>
        <p>很多新人入职第一天卡在这里：有权限但拉不下来代码。这通常是因为还在用 HTTPS 这种老旧方式。</p>

        <div class="case-study">
            <div class="case-title"><i class="fas fa-user-tie"></i> 场景模拟：入职第一天</div>
            <p>组长给你发了一个仓库地址：<code>git@gitlab.company.com:backend/api-service.git</code>。<br>
            你直接复制去下载，结果报错：<code>Permission denied (publickey)</code>。</p>
        </div>

        <h2>正确步骤：配置 SSH Key</h2>
        <p>这是为了让公司服务器认识你的电脑（相当于录入指纹），配置一次，永久有效。</p>
        <div class="terminal">
            <span class="comment"># 1. 在终端输入生成命令 (一路回车即可)</span>
            <span class="cmd">ssh-keygen -t ed25519 -C "your_email@company.com"</span>
            
            <span class="comment"># 2. 查看并复制生成的公钥 (Windows 使用 type, Mac 使用 cat)</span>
            <span class="cmd">cat ~/.ssh/id_ed25519.pub</span>
            <span class="output">ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... (复制这一长串)</span>
        </div>
        <p><strong>最后一步：</strong> 打开公司 GitLab/GitHub 网页 -> 点击头像 -> Settings -> SSH Keys -> 粘贴进去并保存。</p>

        <h2>现在，执行拉取</h2>
        <div class="terminal">
            <span class="cmd">git clone git@gitlab.company.com:backend/api-service.git</span>
            <span class="output">Cloning into 'api-service'... done.</span>
        </div>
        
    </div>

    <div id="workflow" class="scene">
        <h1>2. 标准开发流程 (Daily Workflow)</h1>
        
        <div class="case-study">
            <div class="case-title"><i class="fas fa-code"></i> 场景模拟：修改登录页标题</div>
            <p>任务：把 <code>index.html</code> 里的标题从 "Welcome" 改成 "Hello"。</p>
        </div>

        <h2>Step 1: 检查状态</h2>
        <div class="terminal">
            <span class="cmd">git status</span>
            <span class="output" style="color:#d29922">modified: index.html</span>
            <span class="comment"># 只要是红色的文件名，说明 Git 发现了修改但还没受理</span>
        </div>

        <h2>Step 2: 加入暂存区 (Add)</h2>
        <div class="terminal">
            <span class="cmd">git add index.html</span>
            <span class="comment"># 再次 git status 会变成绿色，说明已经放入“发货箱”</span>
        </div>

        <h2>Step 3: 提交存档 (Commit)</h2>
        <div class="terminal">
            <span class="cmd">git commit -m "feat: 更新首页标题文案"</span>
            <span class="output">[main 2f3a1c] feat: 更新首页标题文案</span>
        </div>
    </div>

    <div id="compare" class="scene">
        <h1>3. 核心难点：Merge 还是 Rebase?</h1>
        <p>这是小白最容易混淆的地方。两者都是“合并代码”，但结果完全不同。</p>

        <div class="case-study">
            <div class="case-title"><i class="fas fa-random"></i> 场景模拟</div>
            <p>你在 <code>feature</code> 分支开发，同时同事在 <code>main</code> 分支提交了新代码。现在你需要更新你的分支，把同事的代码同步进来。</p>
        </div>

        <div class="comparison-box">
            <div class="viz-col">
                <div class="viz-title" style="color: #a371f7;">Method A: Git Merge</div>
                <div style="height: 120px; position: relative; margin: 20px 0;">
                    <svg width="200" height="100">
                        <line x1="10" y1="80" x2="190" y2="80" stroke="#58a6ff" stroke-width="3"/>
                        <circle cx="50" cy="80" r="6" fill="#58a6ff"/>
                        <circle cx="100" cy="80" r="6" fill="#58a6ff"/>
                        <text x="90" y="95" fill="#58a6ff" font-size="10">同事的提交</text>

                        <path d="M 50 80 Q 70 30 100 30 L 150 30" stroke="#a371f7" stroke-width="3" fill="none"/>
                        <circle cx="100" cy="30" r="6" fill="#a371f7"/>
                        <circle cx="150" cy="30" r="6" fill="#a371f7"/>
                        <text x="90" y="20" fill="#a371f7" font-size="10">你的提交</text>

                        <path d="M 150 30 Q 170 30 190 80" stroke="#a371f7" stroke-width="3" fill="none" stroke-dasharray="4"/>
                        <circle cx="190" cy="80" r="6" fill="white" stroke="#a371f7" stroke-width="2"/>
                        <text x="180" y="95" fill="white" font-size="10">合并节点</text>
                    </svg>
                </div>
                <div class="terminal">
                    <span class="cmd">git merge main</span>
                </div>
                <p style="font-size:12px; color:#8b949e">
                    <strong>特点：</strong>保留完整历史，但会生成一个额外的“合并节点”，导致历史线分叉、像渔网一样乱。
                </p>
            </div>

            <div class="viz-col">
                <div class="viz-title" style="color: #238636;">Method B: Git Rebase (变基)</div>
                <div style="height: 120px; position: relative; margin: 20px 0;">
                    <svg width="200" height="100">
                        <line x1="10" y1="80" x2="100" y2="80" stroke="#58a6ff" stroke-width="3"/>
                        <circle cx="50" cy="80" r="6" fill="#58a6ff"/>
                        <circle cx="100" cy="80" r="6" fill="#58a6ff"/>
                        <text x="90" y="95" fill="#58a6ff" font-size="10">同事的提交</text>

                        <line x1="100" y1="80" x2="180" y2="80" stroke="#238636" stroke-width="3" stroke-dasharray="4"/>
                        <circle cx="140" cy="80" r="6" fill="#238636"/>
                        <circle cx="180" cy="80" r="6" fill="#238636"/>
                        <text x="130" y="65" fill="#238636" font-size="10">你的提交(被移到这里)</text>
                    </svg>
                </div>
                <div class="terminal">
                    <span class="cmd">git rebase main</span>
                </div>
                <p style="font-size:12px; color:#8b949e">
                    <strong>特点：</strong>把你的提交“剪切”下来，“粘贴”到同事最新提交的后面。历史线是一条直线，非常干净。
                </p>
            </div>
        </div>

        <div style="margin-top: 20px; background: rgba(218, 54, 51, 0.1); border: 1px solid var(--danger); padding: 15px; border-radius: 6px;">
            <strong style="color: var(--danger)">⚠️ 黄金法则：</strong><br>
            1. 在<strong>自己的私有分支</strong>上（别人不用的），为了保持整洁，尽量用 <code>Rebase</code>。<br>
            2. 在<strong>公共分支</strong>上（如 main/dev），绝对禁止使用 Rebase，必须用 <code>Merge</code>。
        </div>
        
    </div>

    <div id="conflict" class="scene">
        <h1>4. 手把手解决冲突</h1>
        
        <div class="case-study">
            <div class="case-title"><i class="fas fa-fire"></i> 场景模拟</div>
            <p>你和同事小李都修改了 <code>config.js</code> 的第 3 行。<br>
            小李改成了 <code>timeout = 5000</code> 并先推送了。<br>
            你改成了 <code>timeout = 3000</code>，拉取时报错：<code>CONFLICT (content): Merge conflict in config.js</code>。</p>
        </div>

        <h2>Step 1: 打开代码编辑器</h2>
        <p>你会看到如下乱码，不要怕，这是 Git 在问你选哪个：</p>
        
        <div style="background: #2b2b2b; color: #ccc; padding: 15px; font-family: monospace; border-radius: 6px; border: 1px solid #444;">
            <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code><br>
            <code style="color: #7ee787;">const timeout = 3000; // 你的代码</code><br>
            <code>=======</code><br>
            <code style="color: #79c0ff;">const timeout = 5000; // 小李的代码 (Incoming)</code><br>
            <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; 4a5b6c...</code>
        </div>

        <h2>Step 2: 修改代码</h2>
        <p>直接删除那些 <code><<< === >>></code> 符号，保留你认为正确的数值（比如协商后决定用 5000）。</p>
        <div style="background: #2b2b2b; color: #ccc; padding: 15px; font-family: monospace; border-radius: 6px; border: 1px solid #238636;">
            <code style="color: #e6edf3;">const timeout = 5000;</code>
        </div>

        <h2>Step 3: 告诉 Git 你修好了</h2>
        <div class="terminal">
            <span class="cmd">git add config.js</span>
            <span class="comment"># 如果是 merge 产生的冲突：</span>
            <span class="cmd">git commit -m "fix: 解决超时时间冲突"</span>
            <span class="comment"># 如果是 rebase 产生的冲突：</span>
            <span class="cmd">git rebase --continue</span>
        </div>
    </div>

    <div id="undo" class="scene">
        <h1>5. 救命药丸：写错了怎么办？</h1>
        
        <h3>场景 A: 只是写乱了，还没 add</h3>
        <p>“把文件还原成上次提交的样子，我刚写的都不要了。”</p>
        <div class="terminal"><span class="cmd">git checkout .</span></div>

        <h3>场景 B: 已经 add 了，但不想 commit</h3>
        <p>“哎呀，多添加了一个文件到暂存区。”</p>
        <div class="terminal"><span class="cmd">git reset HEAD file.txt</span></div>

        <h3>场景 C: 已经 commit 了，想撤销这次提交</h3>
        <p>“刚才提交的代码有 Bug，我要撤销这次提交，但保留代码让我再改改。”（最常用）</p>
        <div class="terminal">
            <span class="cmd">git reset --soft HEAD~1</span>
            <span class="comment"># --soft 意思是：撤销提交记录，但保留文件修改在暂存区</span>
        </div>
    </div>

    <div id="ignore" class="scene">
        <h1>6. 忽略文件配置 (.gitignore)</h1>
        <p>有些文件永远不应该上传到仓库，比如：<strong>密码文件、操作系统缓存、巨大的 node_modules、日志文件</strong>。</p>
        
        <div class="case-study">
            <div class="case-title"><i class="fas fa-shield-alt"></i> 场景模拟：门卫机制</div>
            <p>Git 有一个门卫叫 <code>.gitignore</code>。如果你把文件名写在里面，Git 就会假装看不见它们，<code>git status</code> 不会提示，<code>git add</code> 也不会添加。</p>
        </div>

        <h2>如何配置？</h2>
        <p>在项目最外层新建一个名为 <code>.gitignore</code> 的文件（注意前面有个点），写入以下内容：</p>
        
        <div class="file-editor">
            <div class="editor-header"><span>.gitignore</span> <span style="opacity:0.6">TEXT</span></div>
            <div class="editor-content">
<span class="line-comment"># 1. 忽略系统生成文件</span>
.DS_Store
Thumbs.db

<span class="line-comment"># 2. 忽略依赖包 (体积巨大，必须忽略)</span>
node_modules/
dist/

<span class="line-comment"># 3. 忽略环境变量与密钥 (安全第一！)</span>
.env
secret.key

<span class="line-comment"># 4. 忽略日志</span>
*.log
            </div>
        </div>
        

        <div style="margin-top:20px; border:1px solid var(--danger); background: rgba(218,54,51,0.1); padding:15px; border-radius:6px;">
            <strong style="color:var(--danger)">⚠️ 救命：我忽略了，但它还是被上传了？</strong>
            <p style="font-size:13px; margin:5px 0 0;">原因：文件在添加进 <code>.gitignore</code> 之前已经被 Git 追踪了。<br>解决办法：必须先从 Git 缓存中删除它。</p>
            <div class="terminal" style="border:none; background:black; margin-top:10px;">
                <span class="cmd">git rm -r --cached .</span>
                <span class="comment"># 清除所有缓存</span>
                <span class="cmd">git add .</span>
                <span class="comment"># 重新添加，此时 .gitignore 才会生效</span>
                <span class="cmd">git commit -m "fix: 重置忽略规则"</span>
            </div>
        </div>
    </div>

    <div id="simulation" class="scene">
        <h1>7. 综合实战：开发者的一天</h1>
        <p class="desc">这里模拟从接到需求到代码上线的全过程。请按顺序执行。</p>
        
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-time">09:00 AM</div>
                <div class="timeline-content">
                    <h3><i class="fas fa-envelope-open-text" style="color:#d29922"></i> 接到新需求</h3>
                    <p><strong>任务：</strong>开发“联系我们”页面 (contact.html)。<br>
                    <strong>原则：</strong>永远不要在 main 分支直接写代码，第一件事是切新分支。</p>
                    <div class="terminal">
                        <span class="comment"># 1. 确保主分支是最新的</span>
                        <span class="cmd">git checkout main</span>
                        <span class="cmd">git pull</span>
                        <span class="comment"># 2. 创建并切换到新分支</span>
                        <span class="cmd">git checkout -b feat/contact-page</span>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-time">10:30 AM</div>
                <div class="timeline-content">
                    <h3><i class="fas fa-keyboard" style="color:#58a6ff"></i> 沉浸式开发</h3>
                    <p>你在项目中新建了 <code>contact.html</code> 并写完了代码。现在需要保存。</p>
                    <div class="terminal">
                        <span class="cmd">git status</span>
                        <span class="output" style="color:#d29922">Untracked files: contact.html</span>
                        <span class="cmd">git add .</span>
                        <span class="cmd">git commit -m "feat: 新增联系我们页面"</span>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="timeline-time">11:00 AM</div>
                <div class="timeline-content">
                    <h3><i class="fas fa-exclamation-circle" style="color:#da3633"></i> 突发状况：主线变了</h3>
                    <p>准备提交时，发现同事刚刚向 main 分支推送了公共组件更新。你需要把这些更新“同步”到你的分支里。</p>
                    <div style="margin-bottom:10px;"><span class="badge">关键点</span> 此时使用 Rebase 让历史更干净。</div>
                    <div class="terminal">
                        <span class="comment"># 1. 抓取远程最新变动 (不合并，只下载)</span>
                        <span class="cmd">git fetch origin main</span>
                        <span class="comment"># 2. 变基：把你的提交“嫁接”到最新代码后面</span>
                        <span class="cmd">git rebase origin/main</span>
                        <span class="output">Successfully rebased and updated refs/heads/feat/contact-page.</span>
                    </div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot" style="border-color:#238636"></div>
                <div class="timeline-time">11:15 AM</div>
                <div class="timeline-content" style="border-color:#238636">
                    <h3><i class="fas fa-paper-plane" style="color:#238636"></i> 提交上线</h3>
                    <p>本地测试通过，代码是最新的，历史是干净的。发射！</p>
                    <div class="terminal">
                        <span class="cmd">git push origin feat/contact-page</span>
                    </div>
                    <p style="margin-top:10px; font-size:13px; color:#8b949e">之后去 GitLab/GitHub 网页上点击 "Create Merge Request" 即可。</p>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    function show(id) {
        // 切换导航高亮
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        event.currentTarget.classList.add('active');

        // 切换内容区域
        document.querySelectorAll('.scene').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }
</script>
<script defer src="https://umami-three-taupe.vercel.app/myblog" data-website-id="46b66fab-63e8-4777-b035-af3bc5393aee"></script>
</body>
</html>